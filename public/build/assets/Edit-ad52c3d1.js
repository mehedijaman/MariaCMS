import{E as B,r as M,h as F,i as y,T as k,o as C,d as $,b as s,w as m,u as o,m as S,e as _,t as u,a as r,g as I,j as P,C as x,n as z}from"./app-45c1fa09.js";import{_ as O}from"./DialogModal-a0641e4b.js";import{_ as d}from"./InputError-43ea7f75.js";import{_ as c}from"./InputLabel-056a23eb.js";import{_ as q}from"./ImageInput-2bc739e0.js";import{_ as A}from"./ActionButton-084bb844.js";import{_ as G}from"./PrimaryButton-b921ab23.js";import{_ as H}from"./SecondaryButton-071ca990.js";import{_ as U}from"./TextInput-7f45e80c.js";import{_ as J}from"./TextAreaInput-6fc7a8d4.js";import{g as K}from"./textHelper-8b1dfc94.js";import{r as L}from"./PencilIcon-a068161e.js";import"./Modal-e31d547a.js";import"./XMarkIcon-90ada5e1.js";const Q={class:"grid grid-cols-3 space-x-2"},R={class:"col-span-1"},W=["value"],X={class:"col-span-2"},Y={class:"space-y-1"},Z={class:"space-y-1"},ee={class:"space-y-1"},se=r("option",{value:"1"},"Published",-1),le=r("option",{value:"0"},"Unpublished",-1),ae=r("option",{value:null},"Draft",-1),oe=[se,le,ae],te={class:"space-y-1"},Ve={__name:"Edit",props:{title:String,item:Object},emits:["open"],setup(D,{emit:E}){var v,b,V,w;const N=B("updateItems"),T=E,p=M(!1),i=D,a=F({thumbnail:null,name:(v=i.item)==null?void 0:v.name,slug:(b=i.item)==null?void 0:b.slug,description:(V=i.item)==null?void 0:V.description,status:(w=i.item)==null?void 0:w.status,_method:"PUT"});y(()=>a.name,e=>{a.slug=K(e)});let l=k(a);y(a,e=>{l=k(e)});const h=()=>{var e;l.post(route("galleries.update",(e=i.item)==null?void 0:e.id),{preserveScroll:!0,onSuccess:t=>{g(),N(t.props.galleries)},onError:()=>null,onFinish:()=>null})},g=()=>{p.value=!1,l.errors={},l.reset()},j=e=>{e.source==="thumbnail"&&(a.thumbnail=e.file)};return(e,t)=>(C(),$("div",null,[s(A,{onClick:t[0]||(t[0]=S(f=>(p.value=!0,T("open")),["prevent"]))},{default:m(()=>[s(o(L),{class:"w-4 h-auto"})]),_:1}),s(O,{show:p.value,onClose:g,"max-width":"2xl"},{title:m(()=>[_(u(e.lang().label.edit)+" "+u(i.title),1)]),content:m(()=>{var f;return[r("form",{class:"space-y-2",onSubmit:S(h,["prevent"])},[r("div",Q,[r("div",R,[s(c,{for:"thumbnail",value:"Thumbnail"}),s(q,{source:"thumbnail",modelValue:a.thumbnail,"onUpdate:modelValue":t[1]||(t[1]=n=>a.thumbnail=n),class:"mt-1 block w-44 h-44",image:(f=i.item.media[0])==null?void 0:f.original_url,onFileChange:j},null,8,["modelValue","image"]),s(d,{message:o(l).errors.thumbnail,class:"mt-2"},null,8,["message"]),o(l).progress?(C(),$("progress",{key:0,value:o(l).progress.percentage,max:"100"},u(o(l).progress.percentage)+"% ",9,W)):I("",!0)]),r("div",X,[r("div",Y,[s(c,{for:"name",value:e.lang().label.name},null,8,["value"]),s(U,{id:"name",modelValue:a.name,"onUpdate:modelValue":t[2]||(t[2]=n=>a.name=n),type:"text",class:"block w-full",autocomplete:"name",placeholder:e.lang().placeholder.gallery_name,error:o(l).errors.name},null,8,["modelValue","placeholder","error"]),s(d,{message:o(l).errors.name},null,8,["message"])]),r("div",Z,[s(c,{for:"slug",value:e.lang().label.slug},null,8,["value"]),s(U,{id:"slug",modelValue:a.slug,"onUpdate:modelValue":t[3]||(t[3]=n=>a.slug=n),type:"text",class:"block w-full",autocomplete:"slug",placeholder:e.lang().placeholder.slug,error:o(l).errors.slug},null,8,["modelValue","placeholder","error"]),s(d,{message:o(l).errors.slug},null,8,["message"])]),r("div",ee,[s(c,{for:"status",value:e.lang().label.status},null,8,["value"]),P(r("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>a.status=n),id:"status",name:"status",class:"block w-full"},oe,512),[[x,a.status]]),s(d,{message:o(l).errors.status},null,8,["message"])])])]),r("div",te,[s(c,{for:"slug",value:e.lang().label.description},null,8,["value"]),s(J,{id:"slug",modelValue:a.description,"onUpdate:modelValue":t[5]||(t[5]=n=>a.description=n),type:"text",class:"block w-full",autocomplete:"description",placeholder:e.lang().placeholder.description,error:o(l).errors.desctiption},null,8,["modelValue","placeholder","error"]),s(d,{message:o(l).errors.description},null,8,["message"])])],32)]}),footer:m(()=>[s(H,{onClick:g},{default:m(()=>[_(u(e.lang().button.cancel),1)]),_:1}),s(G,{class:z(["ml-3",{"opacity-25":o(l).processing}]),disabled:o(l).processing,onClick:h},{default:m(()=>[_(u(e.lang().button.save)+" "+u(o(l).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Ve as default};
