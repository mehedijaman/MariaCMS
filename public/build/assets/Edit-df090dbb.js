import{E as N,r as j,T as B,o as V,d as w,b as t,w as n,u as s,m as k,e as _,t as m,a,g as D,j as I,C as M,n as T}from"./app-d9a7eb7a.js";import{_ as x}from"./DialogModal-6f025864.js";import{_ as u}from"./InputError-19c360d7.js";import{_ as c}from"./InputLabel-5e293a64.js";import{_ as F}from"./ImageInput-03f2e6ee.js";import{_ as P}from"./ActionButton-db588b65.js";import{_ as z}from"./PrimaryButton-a904e7d6.js";import{_ as O}from"./SecondaryButton-cb1663f8.js";import{_ as q}from"./TextInput-0d35b9b5.js";import{_ as A}from"./TextAreaInput-4c0f8a95.js";import{r as G}from"./PencilIcon-090e16d6.js";import"./Modal-2710b0e7.js";import"./XMarkIcon-ece63d39.js";const H={class:"grid grid-cols-3 space-x-2"},J={class:"col-span-1"},K=["value"],L={class:"col-span-2"},Q={class:"space-y-1"},R=a("option",{value:1},"Published",-1),W=a("option",{value:0},"Unpublished",-1),X=a("option",{value:null},"Draft",-1),Y=[R,W,X],Z={class:"space-y-1"},ee={class:"space-y-1"},ge={__name:"Edit",props:{title:String,item:Object},emits:["open"],setup(C,{emit:$}){var v,h,b,y;const S=N("updateItems"),U=$,p=j(!1),r=C,e=B({image:null,title:(v=r.item)==null?void 0:v.title,description:(h=r.item)==null?void 0:h.description,order:(b=r.item)==null?void 0:b.order,status:(y=r.item)==null?void 0:y.status,_method:"PUT"}),f=()=>{var l,o;e.post(route("gallery.items.update",{gallery:(l=r.item)==null?void 0:l.gallery_id,item:(o=r.item)==null?void 0:o.id}),{preserveScroll:!0,onSuccess:d=>{S(d.props.gallery_items),g()},onError:()=>null,onFinish:()=>null})},g=()=>{p.value=!1,e.errors={},e.reset()},E=l=>{l.source==="image"&&(e.image=l.file)};return(l,o)=>(V(),w("div",null,[t(P,{onClick:o[0]||(o[0]=k(d=>(p.value=!0,U("open")),["prevent"]))},{default:n(()=>[t(s(G),{class:"w-4 h-auto"})]),_:1}),t(x,{show:p.value,onClose:g,"max-width":"2xl"},{title:n(()=>[_(m(l.lang().label.edit)+" "+m(r.title),1)]),content:n(()=>{var d;return[a("form",{class:"space-y-2",onSubmit:k(f,["prevent"])},[a("div",H,[a("div",J,[t(c,{for:"image",value:"Image"}),t(F,{source:"image",modelValue:s(e).image,"onUpdate:modelValue":o[1]||(o[1]=i=>s(e).image=i),class:"mt-1 block w-full h-48",image:(d=r.item)==null?void 0:d.media[0].original_url,onFileChange:E},null,8,["modelValue","image"]),t(u,{message:s(e).errors.image,class:"mt-2"},null,8,["message"]),s(e).progress?(V(),w("progress",{key:0,value:s(e).progress.percentage,max:"100"},m(s(e).progress.percentage)+"% ",9,K)):D("",!0)]),a("div",L,[a("div",Q,[t(c,{for:"status",value:l.lang().label.status},null,8,["value"]),I(a("select",{"onUpdate:modelValue":o[2]||(o[2]=i=>s(e).status=i),id:"status",name:"status",class:"block w-full"},Y,512),[[M,s(e).status]]),t(u,{message:s(e).errors.status},null,8,["message"])]),a("div",Z,[t(c,{for:"title",value:l.lang().label.title},null,8,["value"]),t(q,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":o[3]||(o[3]=i=>s(e).title=i),type:"text",class:"block w-full",autocomplete:"title",placeholder:l.lang().placeholder.gallery_title,error:s(e).errors.title},null,8,["modelValue","placeholder","error"]),t(u,{message:s(e).errors.name},null,8,["message"])]),a("div",ee,[t(c,{for:"slug",value:l.lang().label.description},null,8,["value"]),t(A,{id:"slug",modelValue:s(e).description,"onUpdate:modelValue":o[4]||(o[4]=i=>s(e).description=i),type:"text",class:"block w-full",autocomplete:"description",placeholder:l.lang().placeholder.description,error:s(e).errors.desctiption},null,8,["modelValue","placeholder","error"]),t(u,{message:s(e).errors.description},null,8,["message"])])])])],32)]}),footer:n(()=>[t(O,{onClick:g},{default:n(()=>[_(m(l.lang().button.cancel),1)]),_:1}),t(z,{class:T(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:f},{default:n(()=>[_(m(l.lang().button.save)+" "+m(s(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ge as default};
