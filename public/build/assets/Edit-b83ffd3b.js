import{E as N,r as j,T as B,o as V,d as w,b as l,w as n,u as s,m as k,e as f,t as m,a,g as D,j as I,C as M,n as x}from"./app-029d3c12.js";import{_ as F}from"./DialogModal-d0f6ace0.js";import{_ as d}from"./InputError-5ba87def.js";import{_ as c}from"./InputLabel-4b2acd49.js";import{_ as T}from"./ImageInput-99f321b1.js";import{_ as z}from"./ActionButton-0db8adf7.js";import{_ as O}from"./PrimaryButton-4a147dbe.js";import{_ as P}from"./SecondaryButton-c3ca0618.js";import{_ as q}from"./TextInput-f658579c.js";import{_ as A}from"./TextAreaInput-3de8a557.js";import{r as G}from"./PencilIcon-c6d05811.js";import"./Modal-0faaa9fe.js";import"./XMarkIcon-e53425f1.js";const H={class:"grid grid-cols-3 space-x-2"},J={class:"col-span-1"},K=["value"],L={class:"col-span-2"},Q={class:"space-y-1"},R=a("option",{value:1},"Published",-1),W=a("option",{value:0},"Unpublished",-1),X=a("option",{value:null},"Draft",-1),Y=[R,W,X],Z={class:"space-y-1"},ee={class:"space-y-1"},ge={__name:"Edit",props:{title:String,item:Object},emits:["open"],setup(C,{emit:$}){var v,h,b,y;const S=N("updateItems"),U=$,p=j(!1),r=C,e=B({image:null,title:(v=r.item)==null?void 0:v.title,description:(h=r.item)==null?void 0:h.description,order:(b=r.item)==null?void 0:b.order,status:(y=r.item)==null?void 0:y.status}),_=()=>{var t,o;e.put(route("gallery.items.update",{gallery:(t=r.item)==null?void 0:t.gallery_id,item:(o=r.item)==null?void 0:o.id}),{preserveScroll:!0,onSuccess:u=>{S(u.props.gallery_items),g()},onError:()=>null,onFinish:()=>null})},g=()=>{p.value=!1,e.errors={},e.reset()},E=t=>{t.source==="image"&&(e.image=t.file)};return(t,o)=>(V(),w("div",null,[l(z,{onClick:o[0]||(o[0]=k(u=>(p.value=!0,U("open")),["prevent"]))},{default:n(()=>[l(s(G),{class:"w-4 h-auto"})]),_:1}),l(F,{show:p.value,onClose:g,"max-width":"2xl"},{title:n(()=>[f(m(t.lang().label.edit)+" "+m(r.title),1)]),content:n(()=>{var u;return[a("form",{class:"space-y-2",onSubmit:k(_,["prevent"])},[a("div",H,[a("div",J,[l(c,{for:"image",value:"Image"}),l(T,{source:"image",modelValue:s(e).image,"onUpdate:modelValue":o[1]||(o[1]=i=>s(e).image=i),class:"mt-1 block w-full h-48",image:(u=r.item)==null?void 0:u.media[0].original_url,onFileChange:E},null,8,["modelValue","image"]),l(d,{message:s(e).errors.image,class:"mt-2"},null,8,["message"]),s(e).progress?(V(),w("progress",{key:0,value:s(e).progress.percentage,max:"100"},m(s(e).progress.percentage)+"% ",9,K)):D("",!0)]),a("div",L,[a("div",Q,[l(c,{for:"status",value:t.lang().label.status},null,8,["value"]),I(a("select",{"onUpdate:modelValue":o[2]||(o[2]=i=>s(e).status=i),id:"status",name:"status",class:"block w-full"},Y,512),[[M,s(e).status]]),l(d,{message:s(e).errors.status},null,8,["message"])]),a("div",Z,[l(c,{for:"title",value:t.lang().label.title},null,8,["value"]),l(q,{id:"title",modelValue:s(e).title,"onUpdate:modelValue":o[3]||(o[3]=i=>s(e).title=i),type:"text",class:"block w-full",autocomplete:"title",placeholder:t.lang().placeholder.gallery_title,error:s(e).errors.title},null,8,["modelValue","placeholder","error"]),l(d,{message:s(e).errors.name},null,8,["message"])]),a("div",ee,[l(c,{for:"slug",value:t.lang().label.description},null,8,["value"]),l(A,{id:"slug",modelValue:s(e).description,"onUpdate:modelValue":o[4]||(o[4]=i=>s(e).description=i),type:"text",class:"block w-full",autocomplete:"description",placeholder:t.lang().placeholder.description,error:s(e).errors.desctiption},null,8,["modelValue","placeholder","error"]),l(d,{message:s(e).errors.description},null,8,["message"])])])])],32)]}),footer:n(()=>[l(P,{onClick:g},{default:n(()=>[f(m(t.lang().button.cancel),1)]),_:1}),l(O,{class:x(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:_},{default:n(()=>[f(m(t.lang().button.save)+" "+m(s(e).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ge as default};
