import{E as T,r as j,h as B,i as V,T as k,o as y,d as C,b as a,w as m,u as o,m as $,e as g,t as u,a as r,g as M,j as x,C as F,n as I}from"./app-d9a7eb7a.js";import{_ as P}from"./DialogModal-6f025864.js";import{_ as c}from"./InputError-19c360d7.js";import{_ as d}from"./InputLabel-5e293a64.js";import{_ as z}from"./ImageInput-03f2e6ee.js";import{_ as O}from"./ActionButton-db588b65.js";import{_ as q}from"./PrimaryButton-a904e7d6.js";import{_ as A}from"./SecondaryButton-cb1663f8.js";import{_ as G}from"./TextInput-0d35b9b5.js";import{_ as H}from"./TextAreaInput-4c0f8a95.js";import{g as J}from"./textHelper-8b1dfc94.js";import{r as K}from"./PencilIcon-090e16d6.js";import"./Modal-2710b0e7.js";import"./XMarkIcon-ece63d39.js";const L={class:"grid grid-cols-1 md:grid-cols-3 space-x-2"},Q={class:"col-span-1"},R=["value"],W={class:"col-span-2"},X={class:"space-y-1"},Y={class:"space-y-1"},Z={class:"space-y-1"},ee=r("option",{value:"1"},"Published",-1),se=r("option",{value:"0"},"Unpublished",-1),ae=r("option",{value:null},"Draft",-1),le=[ee,se,ae],ve={__name:"Edit",props:{title:String,item:Object},emits:["open"],setup(S,{emit:U}){var v,b,w;const D=T("updateItems"),E=U,p=j(!1),i=S,l=B({thumbnail:null,name:(v=i.item)==null?void 0:v.name,description:(b=i.item)==null?void 0:b.description,status:(w=i.item)==null?void 0:w.status,_method:"PUT"});V(()=>l.name,e=>{l.slug=J(e)});let s=k(l);V(l,e=>{s=k(e)});const h=()=>{var e;s.post(route("clients.update",(e=i.item)==null?void 0:e.id),{preserveScroll:!0,onSuccess:t=>{f(),D(t.props.clients)},onError:()=>null,onFinish:()=>null})},f=()=>{p.value=!1,s.errors={},s.reset()},N=e=>{e.source==="thumbnail"&&(l.thumbnail=e.file)};return(e,t)=>(y(),C("div",null,[a(O,{onClick:t[0]||(t[0]=$(_=>(p.value=!0,E("open")),["prevent"]))},{default:m(()=>[a(o(K),{class:"w-4 h-auto"})]),_:1}),a(P,{show:p.value,onClose:f,"max-width":"2xl"},{title:m(()=>[g(u(e.lang().label.edit)+" "+u(i.title),1)]),content:m(()=>{var _;return[r("form",{class:"space-y-2",onSubmit:$(h,["prevent"])},[r("div",L,[r("div",Q,[a(d,{for:"thumbnail",value:"Thumbnail"}),a(z,{source:"thumbnail",modelValue:l.thumbnail,"onUpdate:modelValue":t[1]||(t[1]=n=>l.thumbnail=n),class:"mt-1 block w-44 h-44",image:(_=i.item.media[0])==null?void 0:_.original_url,onFileChange:N},null,8,["modelValue","image"]),a(c,{message:o(s).errors.thumbnail,class:"mt-2"},null,8,["message"]),o(s).progress?(y(),C("progress",{key:0,value:o(s).progress.percentage,max:"100"},u(o(s).progress.percentage)+"% ",9,R)):M("",!0)]),r("div",W,[r("div",X,[a(d,{for:"name",value:e.lang().label.name},null,8,["value"]),a(G,{id:"name",modelValue:l.name,"onUpdate:modelValue":t[2]||(t[2]=n=>l.name=n),type:"text",class:"block w-full",autocomplete:"name",placeholder:e.lang().placeholder.gallery_name,error:o(s).errors.name},null,8,["modelValue","placeholder","error"]),a(c,{message:o(s).errors.name},null,8,["message"])]),r("div",Y,[a(d,{for:"slug",value:e.lang().label.description},null,8,["value"]),a(H,{id:"slug",modelValue:l.description,"onUpdate:modelValue":t[3]||(t[3]=n=>l.description=n),type:"text",class:"block w-full",autocomplete:"description",placeholder:e.lang().placeholder.description,error:o(s).errors.desctiption},null,8,["modelValue","placeholder","error"]),a(c,{message:o(s).errors.description},null,8,["message"])]),r("div",Z,[a(d,{for:"status",value:e.lang().label.status},null,8,["value"]),x(r("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>l.status=n),id:"status",name:"status",class:"block w-full"},le,512),[[F,l.status]]),a(c,{message:o(s).errors.status},null,8,["message"])])])])],32)]}),footer:m(()=>[a(A,{onClick:f},{default:m(()=>[g(u(e.lang().button.cancel),1)]),_:1}),a(q,{class:I(["ml-3",{"opacity-25":o(s).processing}]),disabled:o(s).processing,onClick:h},{default:m(()=>[g(u(e.lang().button.save)+" "+u(o(s).processing?"...":""),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{ve as default};
